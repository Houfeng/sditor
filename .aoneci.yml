# 自动生成，不要修改该文件，修复后也将会自动覆盖回来

stage:
  job:
    env:
      image: 'aone-base-global/alios7-nodejs-ci:1.0.0'
    plugin:
      -
        param:
          url: '${repo}'
          branch: '${branch}'
          path: '${source_root}'
          isDelGit: 'false'
        name: checkout
        pos: front
      -
        param:
          version: node-8
          source: '${source_root}'
        name: node_envs
        pos: front
    exec:
      - export PATH=$PWD/node_modules/.bin:$HOME/.cli:$PATH
      - echo $PATH
      - export CI_REPO=${repo}
      - export CI_BRANCH=${branch}
      - export CI_COMMIT=${commit_id}
      - export CI_ROOT=${source_root}
      - export NPM_REGISTRY=https://registry.npm.alibaba-inc.com
      - rm -rf ./node_modules/
      - npm i @ali/job --registry=$NPM_REGISTRY
      - job exec
pipeline:
  - job